import{a as X}from"./chunk-Q2TLA53O.js";import{a as H}from"./chunk-VSYLPDL5.js";import"./chunk-OQEVNF42.js";import{a as w,b as s,d as S,e as b,f as A,h as P,i as q,j as B,k as E,m as I,q as F,r as R,s as L}from"./chunk-QOY4JZOK.js";import{g as j,i as Y,l as V}from"./chunk-O5TP7YJL.js";import{$ as O,Ac as C,Ba as y,Fc as G,Ib as a,Ic as U,Na as d,Oa as u,Sb as T,Ub as z,a as k,db as m,fb as l,ja as g,ka as v,pb as o,qb as n,rb as p,sa as x,ta as M,ub as N,xb as _,zb as h}from"./chunk-L4LCX3VT.js";function et(i,t){i&1&&(o(0,"div",17),a(1," *Price must only contain numbers "),n())}function nt(i,t){i&1&&(o(0,"div",17),a(1," *Discount can only be from 0 to 1 "),n())}var K=(()=>{let t=class t{constructor(r){this.fb=r,this.todayDate=new Date,this.formValuesChange=new y}ngOnInit(){this.productPriceGroup=this.fb.group({price:[this.product?.price,[s.required,s.pattern("^[0-9]*$")]],discount:[this.product?.discount,[s.required,s.min(0),s.max(1)]],shipping:[this.product?.shipping],discountUntil:[this.transformDateForInput(this.product?.discountUntil)]}),this.subscription=this.productPriceGroup.valueChanges.subscribe(r=>{this.formValuesChange.emit(r)})}isControlInvalid(r){let e=this.productPriceGroup.get(r);return e?e.invalid&&(e.dirty||e.touched):!1}ngOnDestroy(){this.subscription.unsubscribe()}transformDateForInput(r){return r?r.split("T")[0]:null}};t.\u0275fac=function(e){return new(e||t)(u(F))},t.\u0275cmp=g({type:t,selectors:[["app-price-form"]],inputs:{product:"product"},outputs:{formValuesChange:"formValuesChange"},decls:28,vars:8,consts:[["action","",3,"formGroup"],[1,"form__price"],[1,"form__heading"],[1,"form__input"],["class","warning",4,"ngIf"],["for","price",1,"form__label"],["formControlName","price","id","price","placeholder","900","type","number",1,"form__field"],["for","discount",1,"form__label"],["formControlName","discount","id","discount","placeholder","0-1","type","number",1,"form__field"],["for","discountUntil",1,"form__label"],["formControlName","discountUntil","id","discountUntil","type","date",1,"form__field",3,"min"],[1,"form__input","form__input_radio"],[1,"radio-container"],["for","free-shipping",1,"form__label"],["formControlName","shipping","id","free-shipping","type","radio","value","Free shipping",1,"form__field","form__field_radio"],["for","paid-shipping",1,"form__label"],["formControlName","shipping","id","paid-shipping","type","radio",1,"form__field","form__field_radio",3,"value"],[1,"warning"]],template:function(e,c){e&1&&(o(0,"form",0)(1,"div",1)(2,"h2",2),a(3,"Price Information"),n(),o(4,"div",3),m(5,et,2,0,"div",4),o(6,"label",5),a(7,"Price"),n(),p(8,"input",6),n(),o(9,"div",3),m(10,nt,2,0,"div",4),o(11,"label",7),a(12,"Discount"),n(),p(13,"input",8),n(),o(14,"div",3)(15,"label",9),a(16,"Discount Until"),n(),p(17,"input",10),T(18,"date"),n(),o(19,"div",11)(20,"div",12)(21,"label",13),a(22,"Free shipping"),n(),p(23,"input",14),n(),o(24,"div",12)(25,"label",15),a(26,"Paid shipping"),n(),p(27,"input",16),n()()()()),e&2&&(l("formGroup",c.productPriceGroup),d(5),l("ngIf",c.isControlInvalid("price")),d(5),l("ngIf",c.isControlInvalid("discount")),d(7),l("min",z(18,5,c.todayDate,"yyyy-MM-dd")),d(10),l("value",null))},dependencies:[C,P,w,q,B,S,b,E,I,G],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%]{line-height:1.5;-webkit-font-smoothing:antialiased}img[_ngcontent-%COMP%], picture[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{display:block;max-width:100%}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font:inherit}p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{overflow-wrap:break-word;margin:0}.container[_ngcontent-%COMP%]{max-width:90vw;margin:0 auto}.box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.warning[_ngcontent-%COMP%]{color:red;font-size:1.15rem;padding:5px 0}@keyframes _ngcontent-%COMP%_appearOpacity{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_appearHeading{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes _ngcontent-%COMP%_appearText{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form__price[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;padding:20px;border-radius:30px;border:1px solid hsl(0,0%,74%);background-color:#f2f2f2;height:fit-content}.form__input_radio[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.form__label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:1.1rem}.form__field[_ngcontent-%COMP%]{width:100%;height:30px;padding:10px;border:1px solid black;border-radius:30px;outline:none;transition:all .3s}.form__field[_ngcontent-%COMP%]:hover{transform:translatey(-3px)}.form__field[_ngcontent-%COMP%]:focus{box-shadow:3px 3px 5px #e834ef}.form__field.form__field_radio[_ngcontent-%COMP%]{appearance:none;width:30px;height:30px;border:1px solid black;border-radius:50%;outline:none;transition:all .3s;cursor:pointer}.form__field.form__field_radio[_ngcontent-%COMP%]:checked{border:5px solid hsl(298,85%,57%)}.form__field.form__field_radio[_ngcontent-%COMP%]:hover{transform:none}.form__field.form__field_radio[_ngcontent-%COMP%]:focus{box-shadow:none}.form[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-direction:column}"]});let i=t;return i})();function it(i,t){i&1&&(o(0,"div",17),a(1," *You need to enter name "),n())}function rt(i,t){i&1&&(o(0,"div",17),a(1," *You need to write at least 10 characters "),n())}function at(i,t){i&1&&(o(0,"div",17),a(1," *You need to enter URL "),n())}function ct(i,t){i&1&&(o(0,"div",17),a(1," *You need to enter shop name "),n())}function lt(i,t){i&1&&(o(0,"div",17),a(1," *You need to enter at least one color "),n())}function dt(i,t){i&1&&(o(0,"div",17),a(1," *You need to enter at least one size "),n())}var Q=(()=>{let t=class t{constructor(r){this.fb=r,this.formValuesChange=new y}ngOnInit(){this.productDetailsGroup=this.fb.group({imgUrl:[this.product?.imgUrl,[s.required]],shop:[this.product?.shop,[s.required]],name:[this.product?.name,[s.required]],description:[this.product?.description,[s.required,s.minLength(10)]],color:[this.product?.color,[s.required]],size:[this.product?.size,[s.required]]}),this.subscription=this.productDetailsGroup.valueChanges.subscribe(r=>{this.formValuesChange.emit(r)})}isControlInvalid(r){let e=this.productDetailsGroup.get(r);return e?e.invalid&&(e.dirty||e.touched):!1}transformStringToArray(r){let e=this.productDetailsGroup.get(r)?.value;if(typeof e=="string"){let c=e.split(",");this.productDetailsGroup.get(r)?.setValue(c)}}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(u(F))},t.\u0275cmp=g({type:t,selectors:[["app-details-form"]],inputs:{product:"product"},outputs:{formValuesChange:"formValuesChange"},decls:34,vars:7,consts:[["action","",3,"formGroup"],[1,"form__details"],[1,"form__heading"],[1,"form__input"],["class","warning",4,"ngIf"],["for","name",1,"form__label"],["formControlName","name","id","name","placeholder","Argon 18","type","text",1,"form__field"],["for","description",1,"form__label"],["formControlName","description","id","description","placeholder","Enter the description of your product","rows","5","type","text",1,"form__field","form__field_textarea"],["for","img",1,"form__label"],["formControlName","imgUrl","id","img","placeholder","https://cyclingmagazine.ca/wp-content/uploads/2018/03/etap.shadowpsd_2048x.png","type","text",1,"form__field"],["for","shop",1,"form__label"],["formControlName","shop","id","shop","placeholder","Canada Bike","type","text",1,"form__field"],["for","color",1,"form__label"],["formControlName","color","id","color","placeholder","black green blue","type","text",1,"form__field",3,"change"],["for","size",1,"form__label"],["formControlName","size","id","size","placeholder","S L XL","type","text",1,"form__field",3,"change"],[1,"warning"]],template:function(e,c){e&1&&(o(0,"form",0)(1,"div",1)(2,"h2",2),a(3,"Basic Information"),n(),o(4,"div",3),m(5,it,2,0,"div",4),o(6,"label",5),a(7,"Bike Name"),n(),p(8,"input",6),n(),o(9,"div",3),m(10,rt,2,0,"div",4),o(11,"label",7),a(12,"Description"),n(),p(13,"textarea",8),n(),o(14,"div",3),m(15,at,2,0,"div",4),o(16,"label",9),a(17,"Image URL"),n(),p(18,"input",10),n(),o(19,"div",3),m(20,ct,2,0,"div",4),o(21,"label",11),a(22,"Shop Name"),n(),p(23,"input",12),n(),o(24,"div",3),m(25,lt,2,0,"div",4),o(26,"label",13),a(27,"Color"),n(),o(28,"input",14),_("change",function(){return c.transformStringToArray("color")}),n()(),o(29,"div",3),m(30,dt,2,0,"div",4),o(31,"label",15),a(32,"Size"),n(),o(33,"input",16),_("change",function(){return c.transformStringToArray("size")}),n()()()()),e&2&&(l("formGroup",c.productDetailsGroup),d(5),l("ngIf",c.isControlInvalid("name")),d(5),l("ngIf",c.isControlInvalid("description")),d(5),l("ngIf",c.isControlInvalid("imgUrl")),d(5),l("ngIf",c.isControlInvalid("shop")),d(5),l("ngIf",c.isControlInvalid("color")),d(5),l("ngIf",c.isControlInvalid("size")))},dependencies:[C,P,w,S,b,E,I],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%]{line-height:1.5;-webkit-font-smoothing:antialiased}img[_ngcontent-%COMP%], picture[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{display:block;max-width:100%}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font:inherit}p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{overflow-wrap:break-word;margin:0}.container[_ngcontent-%COMP%]{max-width:90vw;margin:0 auto}.box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.warning[_ngcontent-%COMP%]{color:red;font-size:1.15rem;padding:5px 0}@keyframes _ngcontent-%COMP%_appearOpacity{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_appearHeading{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes _ngcontent-%COMP%_appearText{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form__details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;padding:20px;border-radius:30px;border:1px solid hsl(0,0%,74%);background-color:#f2f2f2;grid-row:span 2;height:fit-content}.form__label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:1.1rem}.form__field[_ngcontent-%COMP%]{width:100%;height:30px;padding:10px;border:1px solid black;border-radius:30px;outline:none;transition:all .3s}.form__field[_ngcontent-%COMP%]:hover{transform:translatey(-3px)}.form__field[_ngcontent-%COMP%]:focus{box-shadow:3px 3px 5px #e834ef}.form__field.form__field_textarea[_ngcontent-%COMP%]{height:auto}.form__field.form__field_radio[_ngcontent-%COMP%]{appearance:none;width:30px;height:30px;border:1px solid black;border-radius:50%;outline:none;transition:all .3s;cursor:pointer}.form__field.form__field_radio[_ngcontent-%COMP%]:checked{border:5px solid hsl(298,85%,57%)}.form__field.form__field_radio[_ngcontent-%COMP%]:hover{transform:none}.form__field.form__field_radio[_ngcontent-%COMP%]:focus{box-shadow:none}"]});let i=t;return i})();function pt(i,t){if(i&1){let f=N();o(0,"form",4),_("ngSubmit",function(){x(f);let e=h();return M(e.onSubmit())}),o(1,"app-details-form",5),_("formValuesChange",function(e){x(f);let c=h();return M(c.onFormValuesChange(e))}),n(),o(2,"app-price-form",6),_("formValuesChange",function(e){x(f);let c=h();return M(c.onFormValuesChange(e))}),n(),p(3,"app-image-preview",7),o(4,"div",8)(5,"button",9),a(6,"Submit"),n(),o(7,"button",10),_("click",function(){x(f);let e=h();return M(e.deleteProduct())}),a(8,"Delete Product"),n()()()}if(i&2){let f=h();d(),l("product",f.product),d(),l("product",f.product),d(),l("imgUrl",f.product.imgUrl)}}var W=(()=>{let t=class t{constructor(r,e,c){this.route=r,this.productsFirebaseService=e,this.router=c}ngOnInit(){let r=Number(this.route.snapshot.paramMap.get("productId"));this.subscription=this.productsFirebaseService.getProductByIdFromFirebase(r).subscribe(e=>{this.product=e})}onFormValuesChange(r){this.product=k(k({},this.product),r)}onSubmit(){this.product&&this.productsFirebaseService.upsertProductToFirebase(this.product),this.router.navigate(["/shop"])}deleteProduct(){this.product&&this.productsFirebaseService.deleteProductFromFirebase(this.product),this.router.navigate(["/shop"])}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(u(j),u(H),u(Y))},t.\u0275cmp=g({type:t,selectors:[["app-edit-product-container"]],decls:6,vars:1,consts:[[1,"container"],[1,"heading"],[1,"heading__text"],["action","","class","form",3,"ngSubmit",4,"ngIf"],["action","",1,"form",3,"ngSubmit"],[1,"form__details",3,"formValuesChange","product"],[1,"form__price",3,"formValuesChange","product"],[3,"imgUrl"],[1,"button-container","button"],["type","submit",1,"button-submit"],[1,"button-delete",3,"click"]],template:function(e,c){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",0)(3,"h1",2),a(4,"Edit/Delete product"),n()()(),m(5,pt,9,3,"form",3),n()),e&2&&(d(5),l("ngIf",c.product))},dependencies:[C,P,b,A,X,K,Q],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%]{line-height:1.5;-webkit-font-smoothing:antialiased}img[_ngcontent-%COMP%], picture[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{display:block;max-width:100%}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font:inherit}p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{overflow-wrap:break-word;margin:0}.heading[_ngcontent-%COMP%], .button-delete[_ngcontent-%COMP%], .button-submit[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.button-delete[_ngcontent-%COMP%], .button-submit[_ngcontent-%COMP%]{background-color:#e834ef;border:1px solid black;color:#000;text-decoration:none;cursor:pointer;transition:all .3s}.button-delete[_ngcontent-%COMP%]:hover, .button-submit[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.button-delete[_ngcontent-%COMP%]:active, .button-submit[_ngcontent-%COMP%]:active{background-color:#ffff14}.heading[_ngcontent-%COMP%]{height:100px}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:400;font-size:2rem;position:relative;width:fit-content}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:after{content:"";width:50%;height:30px;border-bottom:4px solid hsl(298,85%,57%);position:absolute;top:13px;left:27%}.container[_ngcontent-%COMP%]{max-width:90vw;margin:0 auto}.box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.warning[_ngcontent-%COMP%]{color:red;font-size:1.15rem;padding:5px 0}@keyframes _ngcontent-%COMP%_appearOpacity{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_appearHeading{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes _ngcontent-%COMP%_appearText{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.75fr 1.25fr;grid-template-rows:repeat(2,auto);grid-gap:20px;padding:20px 0}.form__heading[_ngcontent-%COMP%]{font-size:1.25rem}.form__details[_ngcontent-%COMP%]{grid-row:span 2}app-image-preview[_ngcontent-%COMP%]{grid-column-start:2}.button[_ngcontent-%COMP%]{display:flex;gap:10px;grid-column:span 2;width:fit-content;margin:0 auto}.button-submit[_ngcontent-%COMP%]{width:210px;height:30px;border-radius:30px;background:transparent;border-color:#000;color:#000}.button-delete[_ngcontent-%COMP%]{width:210px;height:30px;border-radius:30px;background:transparent;border-color:red;color:red}@media (max-width: 767px){.form[_ngcontent-%COMP%]{grid-template-rows:auto}.form__details[_ngcontent-%COMP%], .form__price[_ngcontent-%COMP%]{grid-column:span 2}.button[_ngcontent-%COMP%]{flex-direction:column}app-image-preview[_ngcontent-%COMP%]{grid-column-start:1;grid-column:span 2}}']});let i=t;return i})();var mt=[{path:"",component:W}],Z=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v({type:t}),t.\u0275inj=O({imports:[V.forChild(mt),V]});let i=t;return i})();var qt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v({type:t}),t.\u0275inj=O({imports:[U,Z,R,L]});let i=t;return i})();export{qt as EditProductModule};
